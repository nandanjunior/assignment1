# Dockerfile.rest.mapreduce
FROM python:3.11-slim

WORKDIR /app

# Copy requirements and install
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copy project files
COPY rest/server/mapreduce_service_rest.py ./rest/server/
COPY data/ ./data/

# Environment variables
ENV MAPREDUCE_PORT=5001
ENV USERBEHAVIOR_URL=http://rest-userbehavior:5003/userbehavior

EXPOSE 5001

CMD ["python", "-u", "rest/server/mapreduce_service_rest.py"]
