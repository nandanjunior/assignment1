# Dockerfile.rest.genre
FROM python:3.11-slim

WORKDIR /app

# Copy requirements and install
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copy project files
COPY rest/server/genre_analysis_service.py ./rest/server/
COPY data/ ./data/

# Environment variables
ENV GENRE_ANALYSIS_PORT=5005
ENV RECOMMENDATION_URL=http://rest-recommendation:5007/recommend

EXPOSE 5005

CMD ["python", "-u", "rest/server/genre_analysis_service.py"]
